matrix:
  include:
    - python: 2.7

before_install:
  - export JYTHON_URL='http://search.maven.org/remotecontent?filepath=org/python/jython-installer/2.7.0/jython-installer-2.7.0.jar'
  - wget $JYTHON_URL -O jython_installer.jar; java -jar jython_installer.jar -s -d $HOME/jython; export PATH=$HOME/jython/bin:$PATH

install:
  - pip install --user -r requirements.txt
  - mkdir $HOME/build/oracc/nammu/resources/lib
  - javac -d $HOME/build/oracc/nammu/resources/lib $HOME/build/oracc/nammu/src/main/java/uk/ac/ucl/rc/development/oracc/ext/*.java
  - export JYTHONPATH=$HOME/build/oracc/nammu/resources/lib:$JYTHONPATH
  - mkdir $HOME/.nammu
  - cp $HOME/build/oracc/nammu/resources/config/*.yaml $HOME/.nammu

before_script:
 - "export DISPLAY=:99.0"
 - "sh -e /etc/init.d/xvfb start"
 - sleep 3 # give xvfb some time to start

script:
  - py.test
